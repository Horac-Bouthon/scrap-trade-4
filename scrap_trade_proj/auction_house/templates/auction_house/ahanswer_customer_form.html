{% extends "project_main/base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% load i18n %}

{% block style %}
{% if object.owner.customer_background %}
  <style>
    body {
      background-image: url("{{ object.owner.customer_background.url }}");
      background-repeat: no-repeat;
      background-size: cover;
  }
  </style>
{% endif %}
{% endblock style %}


{% block content %}
  <article class="media content-section">
    <a href="{% url 'project-customer-info' object.owner.pk %}" target="_blank">
      <img class="rounded-circle customer-logo" src="{{ object.owner.customer_logo.url }}">
    </a>
    <div class="media-body">
      <h2 class="customer-name">{{ object.customer_name }}</h2>
      <form class="" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <fieldset class="form-group">
          {{ form|crispy }}
        </fieldset>
        <div class="form-group">
          {% if object.is_new %}
            {% trans "Confirm answer" as var_conf %}
            <a class="btn btn-outline-secondary" href="{% url 'ah-customer-confirm-answer' object.owner.pk object.pk %}">{{ var_conf }}</a>
          {% endif %}
          {% if object.is_successful %}
            {% trans "Accept answer" as var_accept %}
            <a class="btn btn-outline-secondary" href="{% url 'ah-customer-accept-answer' object.owner.pk object.pk %}">{{ var_accept }}</a>
          {% endif %}
          {% if object.is_accepted %}
            {% trans "Close answer" as var_close %}
            <a class="btn btn-outline-secondary" href="{% url 'ah-customer-close-answer' object.owner.pk object.pk %}">{{ var_close }}</a>
          {% endif %}
          {% if object.is_cancelled == False and object.is_closed == False %}
            {% trans "Cancel answer" as var_cancel %}
            <a class="btn btn-outline-danger" href="{% url 'ah-customer-cancel-answer' object.owner.pk object.pk %}">{{ var_cancel }}</a>
          {% endif %}
        </div>
        <div class="form-group">
          {% trans "Update" as var_add %}
          <button class="btn btn-outline-info" type="submit">{{ var_add }}</button>
          {% trans "Cancel" as var_cancel %}
          <a class="btn btn-outline-secondary" href="{% url 'ah-answer-detail' object.pk %}">{{ var_cancel }}</a>
        </div>
      </form>
    </div>
  </article>
{% endblock content %}

{% block spec_action %}
{% endblock spec_action %}
