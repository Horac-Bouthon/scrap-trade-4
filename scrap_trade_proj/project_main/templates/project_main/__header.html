
{% load i18n %}

<header class="site-header">
  {# @todo; Better navbar for phone users -- burger+sidebar? #}
  <nav class="navbar navbar-dark fixed-top 
              navbar-expand-md">
    <div class="container-lg">
      
      {# Project Logo #}
      <a class="navbar-brand"
         href="{% url 'project-home' %}">
        {% if project %}
          <img class="project-logo" id="logo-project-middle"
               src="{{ project.project_logo.url }}"
               alt="Project logo">
        {% else %}
          <img class="project-logo" id="logo-project-middle"
               src="/media/default-project-logo.png"
               alt="Default project logo">
        {% endif %}
      </a>

      {# Toggle the navigation #}
      <button class="navbar-toggler" type="button"
              data-toggle="collapse"
              aria-expanded="false"
              aria-label="Toggle navigation"
              data-target="#navbar-primary-collapse"
              aria-controls="navbar-primary-collapse">
        <span class="navbar-toggler-icon"></span>
      </button>


      
      <div class="navbar-collapse collapse" id="navbar-primary-collapse">
        
        <ul class="navbar-nav">
          
          {# Auction navigation ...@todo; Can't we do that better?? #}
          {% if user.is_authenticated %}
            {% trans "Customers" as var_customers context "base-navbar" %}
            <li><a class="btn nav-item nav-link"
                   href="{% url 'project-customer-home' %}">
              {{ var_customers }}
            </a></li>
            
            {% if user.customer %}
              <li><a class="btn nav-item nav-link"
                     href="{% url 'ah-customer-auction' user.customer.pk %}">
                {{ user.customer.customer_name }}
              </a></li>
            {% endif %}
            
          {% endif %}
          
        </ul>
        
        <div class="mr-auto">
          {# Empty spacer that pushes the next items to the right #}
        </div>  

        {# Static page navigation #}
        {# @todo; Show the static page nav differently when logged in and working inside the auction sections #}
        <ul class="nav navbar-nav">
          {% if user.is_authenticated %}
            
            {% for page in user.project.get_page_sequence %}
              <li><a class="btn nav-item nav-link"
                     href="{% url page.page_code %}">
                {{ page.act_name }}
              </a></li>
            {% endfor %}
            
          {% else %}
            
            {% for page in project.get_page_sequence %}
              <li><a class="btn nav-item nav-link"
                     href="{% url page.page_code %}">
                {{ page.act_name }}
              </a></li>
            {% endfor %}
            
          {% endif %}
        </ul>


        
      </div>

      {# Language switching #}
      <div class="d-none d-lg-flex  {# ...display in header only on large screens, mobile users can go to the footer for now. #}
                  align-items-center mx-2">
        {% include "project_main/__lang-switcher.html" with outlined_button=True %}
      </div>
      
    </div>
  </nav>
</header>
