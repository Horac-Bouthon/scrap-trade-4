{% extends "project_main/base.html" %}
{% load static %}
{% load i18n %}

{% block style %}
<style>
  body {
    background-image: url("{{ object.customer_background.url }}");
    background-repeat: no-repeat;
    background-size: cover;
}
</style>
{% endblock style %}

{% block content %}

  {% include 'project_main/__content-header.html' %}

  <section class="container">
    <div class="container">

      <dl>
        <h4>
          {% trans "Details" %}
          {% url 'project-customer-update' object.pk as href %}
          {% include 'project_main/__btn-icon-edit.html' %}
        </h4>

        <dt> {% trans "Registration number:" %} </dt>
        <dd> {{ object.customer_ICO }} </dd>

        <dt> {% trans "VAT:" %} </dt>
        <dd> {{ object.customer_DIC }} </dd>

        <dt> {% trans "Short description:" %} </dt>
        <dd><p>
          {{ object.act_short }}
        </p></dd>

        <dt> {% trans "Long description:" %} </dt>
        <dd><p>
          {{ object.act_description }}
        </p></dd>

      </dl>


      <dl>
        <h4>
          {% trans "E-mails:" %}
          {% url 'project-customer-email-create' object.pk as href %}
          {% include 'project_main/__btn-icon-add.html' %}
        </h4>
        {% if object.customeremail_set.count > 0 %}
          <ul>
            {% for email in object.customeremail_set.all %}
              <li class="my-2">

                {{ email.customer_email }}

                <div class="btn-group">
                  {% url 'project-customer-email-update' object.pk email.pk as href %}
                  {% include 'project_main/__btn-icon-edit.html' %}
                  {% url 'project-email-delete' email.pk as href %}
                  {% include 'project_main/__btn-icon-delete.html' %}
                </div>

              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </dl>


      <dl>
        <h4>
          {% trans "Websites:" %}
          {% url 'project-customer-web-create' object.pk as href %}
          {% include 'project_main/__btn-icon-add.html' %}
        </h4>
        <ul>
          {% for web in object.customerweb_set.all %}
            <li class="my-2">

              <a href="{{ web.customer_web }}">
                {{ web.customer_web }} {# Link to the actual web #}
              </a>

              <div class="btn-group">
                {% url 'project-customer-web-update' object.pk web.pk as href %}
                {% include 'project_main/__btn-icon-edit.html' %}
                {% url 'project-web-delete' web.pk as href %}
                {% include 'project_main/__btn-icon-delete.html' %}
              </div>

            </li>
          {% endfor %}
        </ul>
      </dl>


      <dl>
        <h4>
          {% trans "Establishments:" %}
          {% url 'project-customer-est-create' object.pk as href %}
          {% include 'project_main/__btn-icon-add.html' %}
        </h4>

        <ul>
          {% for address in object.customerestablishments_set.all %}
            <li class="my-2">

              {% include 'project_main/__address.html' with address=address %}

              <div class="btn-group">
                {% url 'project-customer-est-update' object.pk address.pk as href%}
                {% include 'project_main/__btn-icon-edit.html' %}
                {% url 'project-est-delete' address.pk as href %}
                {% include 'project_main/__btn-icon-delete.html' %}
                {% url 'doc-repo-dokument-list' address.open_id.int_id as href %}
                {% include 'doc_repo/__btn-icon-doc.html' %}
              </div>

            </li>
          {% endfor %}
        </ul>
      </dl>


      <dl>
        <h4>
          {% trans "Phones:" %}
          {% url 'project-customer-phone-create' object.pk as href %}
          {% include 'project_main/__btn-icon-add.html' %}
        </h4>

        <ul>
          {% for phone in object.customerphone_set.all %}
            <li class="my-2">

              {{ phone.customer_phone }} {{ phone.desctiption }}
              ({{ phone.category.act_category_name }})

              <div class="btn-group">
                {% url 'project-customer-phone-update' object.pk phone.pk as href%}
                {% include 'project_main/__btn-icon-edit.html' %}
                {% url 'project-phone-delete' phone.pk as href %}
                {% include 'project_main/__btn-icon-delete.html' %}
              </div>

            </li>
          {% endfor %}
        </ul>
      </dl>


      <dl>
        <h4>
          {% trans "Bank accounts:" %}
          {% url 'project-customer-bank-create' object.pk as href %}
          {% include 'project_main/__btn-icon-add.html' %}
        </h4>

        <ul>
          {% for bank in object.customerebank_set.all %}
            <li class="my-2">

              <div class="btn-group">
                {% url 'project-customer-bank-update' object.pk bank.pk as href %}
                {% include 'project_main/__btn-icon-edit.html' %}
                {% url 'project-bank-delete' bank.pk as href%}
                {% include 'project_main/__btn-icon-delete.html' %}
              </div>

              {{ bank.account }}/{{ bank.bank_id }} (IBAN: {{ bank.iban }})

            </li>
          {% endfor %}
        </ul>
      </dl>


      <dl>
        <h4>
          {% trans "Users:" %}
          {% url 'project-customer-user-create' object.pk as href %}
          {% include 'project_main/__btn-icon-add.html' %}
        </h4>

        <ul>
          {% for user in object.projectcustomuser_set.all %}
            <li class="my-2">

              {% if user.is_active %}
                {{ user.name }} / {{ user.email }}
              {% else %}
                <span class="text-danger">
                  {{ user.name }} / {{ user.email }} (inactive)
                </span>
              {% endif %}

              <div class="btn-group">
                {% url 'project-customer-user-update' object.pk user.pk as href %}
                {% include 'project_main/__btn-icon-edit.html' %}
              </div>

            </li>
          {% endfor %}
        </ul>
      </dl>

    </div>
  </section>
{% endblock content %}
