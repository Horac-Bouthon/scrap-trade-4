{% extends "project_main/base.html" %}
{% load static %}
{% load i18n %}

{% block style %}
<style>
  body {
    background-image: url("{{ object.customer_background.url }}");
    background-repeat: no-repeat;
    background-size: cover;
}
</style>
{% endblock style %}

{% block content %}

    <article class="media content-section">
      <img class="rounded-circle customer-logo" src="{{ object.customer_logo.url }}">
      <div class="media-body">
        {% trans "Click to update the description" as var_hint1 %}
        <h2 class="customer-name">
          {{ object.customer_name }}
        </h2>
        <p>
          {% trans "Registration number:" as var_reg_num %}
          <span class="customer-detail-content-highlighite">{{ var_reg_num }} </span>
          <span class="customer-detail-content">{{ object.customer_ICO }}</span></p>
        <p>
          {% trans "VAT:" as var_vat %}
          <span class="customer-detail-content-highlighite">{{ var_vat }} </span>
          <span class="customer-detail-content">{{ object.customer_DIC }}
        </span></p>
        {% if object.act_description %}
          <p class="customer-detail-content">{{ object.act_description }}</p>
        {% endif %}
        {% trans "Establishments:" as var_est %}
        <h5 class="customer-title">
          {{ var_est }}
        </h5>
        {% if object.customerestablishments_set.all.count > 0 %}
          {% for address in object.customerestablishments_set.all %}
            <p>
              {{ address.establishment}} <br>
              {{ address.address_street }} {{ address.address_number }} <br>
              {{ address.address_zip_code }} {{ address.address_town }} <br>
            </p>
          {% endfor %}
        {% endif %}
        {% trans "E-mails:" as var_emails %}
        <h5 class="customer-title">
          {{ var_emails }}
        </h5>
        {% if object.customeremail_set.all.count > 0 %}
            <p>
              {% for email in object.customeremail_set.all %}
                    {{ email.customer_email }}
                    <br>
              {% endfor %}
            </p>
        {% endif %}
        {% trans "Websites:" as var_webs %}
        <h5 class="customer-title">
          {{ var_webs }}
        </h5>
        {% if object.customerweb_set.all.count > 0 %}
          <p>
            {% for web in object.customerweb_set.all %}
              {{ web.customer_web }}
              <br>
            {% endfor %}
          </p>
        {% endif %}
        {% trans "Phones:" as var_phones %}
        <h5 class="customer-title">
          {{ var_phones }}
        </h5>
        {% if object.customerphone_set.all.count > 0 %}
          <p>
            {% for phone in object.customerphone_set.all %}
              {{ phone.customer_phone }} {{ phone.desctiption }} ({{ phone.category.act_category_name }})
              <br>
            {% endfor %}
          </p>
        {% endif %}
        {% trans "Bank accounts:" as var_bas %}
        <h5 class="customer-title">
          {{ var_bas }}
        </h5>
        {% if object.customerbankaccount_set.all.count > 0 %}
          <p>
            {% for b_acc in object.customerbankaccount_set.all %}
                {{ b_acc.account }}/{{ b_acc.bank_id }} (IBAN: {{ b_acc.iban }})
              <br>
            {% endfor %}
          </p>
        {% endif %}
      </div>

    </article>


{% endblock content %}

{% block spec_action %}
{% trans "Edit customer" as var_update_customer context "right-navbar" %}
{% if object.pk == user.customer.pk %}
  {% if "customers.is_customer_admin" in perms %}
    <a class="nav-item nav-link btn btn-outline-secondary right-column-button" href="{% url 'project-customer-detail' object.pk %}">{{ var_update_customer }}</a>
  {% endif %}
{% else %}
    {% if "customers.is_poweruser" in perms %}
      <a class="nav-item nav-link btn btn-outline-secondary right-column-button" href="{% url 'project-customer-detail' object.pk %}">{{ var_update_customer }}</a>
    {% endif %}
{% endif %}
{% endblock spec_action %}
